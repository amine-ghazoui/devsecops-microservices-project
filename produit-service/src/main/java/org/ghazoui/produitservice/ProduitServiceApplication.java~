package org.ghazoui.produitservice;

import org.ghazoui.produitservice.entities.Produit;
import org.ghazoui.produitservice.repositories.ProduitRepository;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;

@SpringBootApplication
public class ProduitServiceApplication {

	public static void main(String[] args) {
		SpringApplication.run(ProduitServiceApplication.class, args);
	}

	@Bean
	CommandLineRunner initDatabase(ProduitRepository produitRepository) {
		return args -> {
			// V√©rifier si la base de donn√©es est d√©j√† initialis√©e
			if (produitRepository.count() == 0) {
				System.out.println("üöÄ Initialisation de la base de donn√©es avec des produits de test...");

				// Cr√©er des produits de test
				produitRepository.save(Produit.builder()
						.nom("Ordinateur Portable Dell XPS 15")
						.description("Ordinateur portable haute performance avec √©cran 15 pouces")
						.prix(1299.99)
						.quantiteStock(15)
						.build());

				produitRepository.save(Produit.builder()
						.nom("iPhone 15 Pro")
						.description("Smartphone Apple derni√®re g√©n√©ration")
						.prix(1199.00)
						.quantiteStock(25)
						.build());

				produitRepository.save(Produit.builder()
						.nom("Samsung Galaxy S24")
						.description("Smartphone Samsung avec √©cran AMOLED")
						.prix(899.99)
						.quantiteStock(30)
						.build());

				produitRepository.save(Produit.builder()
						.nom("MacBook Pro M3")
						.description("Ordinateur portable Apple avec puce M3")
						.prix(2499.00)
						.quantiteStock(10)
						.build());

				produitRepository.save(Produit.builder()
						.nom("iPad Air")
						.description("Tablette Apple 10.9 pouces")
						.prix(649.99)
						.quantiteStock(20)
						.build());

				produitRepository.save(Produit.builder()
						.nom("AirPods Pro 2")
						.description("√âcouteurs sans fil avec r√©duction de bruit")
						.prix(279.00)
						.quantiteStock(50)
						.build());

				produitRepository.save(Produit.builder()
						.nom("Sony WH-1000XM5")
						.description("Casque audio sans fil premium")
						.prix(399.99)
						.quantiteStock(18)
						.build());

				produitRepository.save(Produit.builder()
						.nom("Logitech MX Master 3S")
						.description("Souris sans fil ergonomique")
						.prix(99.99)
						.quantiteStock(40)
						.build());

				produitRepository.save(Produit.builder()
						.nom("Clavier M√©canique Keychron K2")
						.description("Clavier m√©canique sans fil RGB")
						.prix(89.99)
						.quantiteStock(35)
						.build());

				produitRepository.save(Produit.builder()
						.nom("Moniteur LG UltraWide 34\"")
						.description("√âcran ultra-large 34 pouces QHD")
						.prix(599.00)
						.quantiteStock(12)
						.build());

				System.out.println("‚úÖ " + produitRepository.count() + " produits ins√©r√©s avec succ√®s!");
			} else {
				System.out.println(
						"‚ÑπÔ∏è Base de donn√©es d√©j√† initialis√©e avec " + produitRepository.count() + " produits.");
			}
		};
	}

}
